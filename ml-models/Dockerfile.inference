FROM python:3.11-slim

WORKDIR /app

RUN pip install --no-cache-dir \
    flask==3.0.0 \
    google-cloud-aiplatform==1.38.0 \
    gunicorn==21.2.0

COPY inference_service.py .

ENV PORT=8080

CMD exec gunicorn --bind :$PORT --workers 2 --threads 8 --timeout 0 inference_service:app
